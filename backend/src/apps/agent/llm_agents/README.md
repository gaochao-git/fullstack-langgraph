# LLM Agents ç›®å½•è¯´æ˜

æœ¬ç›®å½•åŒ…å«ä¸¤ç±» Agentï¼š

## 1. å†…ç½® Agentï¼ˆå¸¦ @agent è£…é¥°å™¨ï¼‰

æ‰€æœ‰ä½¿ç”¨ `@agent` è£…é¥°å™¨çš„éƒ½æ˜¯**å†…ç½® Agent**ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- âœ… ç³»ç»Ÿé¢„ç½®çš„åŠŸèƒ½æ€§ Agent
- âœ… å¯åŠ¨æ—¶è‡ªåŠ¨æ³¨å†Œåˆ°ç³»ç»Ÿ
- âœ… åŒæ­¥åˆ°æ•°æ®åº“ï¼Œæ ‡è®°ä¸º `is_builtin=yes`
- âœ… ä¸å¯è¢«å‰ç«¯ç”¨æˆ·ä¿®æ”¹æ ¸å¿ƒé€»è¾‘

ç¤ºä¾‹ï¼š
```python
from src.apps.agent.llm_agents.decorators import agent

# åœ¨ configuration.py ä¸­å®šä¹‰
INIT_AGENT_CONFIG = {
    "agent_id": "diagnostic_agent",
    "description": "æ™ºèƒ½è¿ç»´è¯Šæ–­åŠ©æ‰‹",
    "agent_type": "å†…ç½®",
    "capabilities": ["æ•…éšœè¯Šæ–­", "æ€§èƒ½åˆ†æ"],
    "version": "1.0.0",
    "icon": "MedicineBoxOutlined",
    "owner": "system"
}

# åœ¨ graph.py ä¸­ä½¿ç”¨
@agent(**INIT_AGENT_CONFIG)
async def create_diagnostic_agent(config):
    # Agent å®ç°
    pass
```

## 2. æ¨¡æ¿ Agentï¼ˆä¸å¸¦ @agent è£…é¥°å™¨ï¼‰

**generic_agent** æ˜¯å”¯ä¸€çš„æ¨¡æ¿ Agentï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- ğŸ”§ ä½œä¸ºå‰ç«¯åˆ›å»ºè‡ªå®šä¹‰ Agent çš„æ¨¡æ¿
- ğŸ”§ ä¸è¢«æ³¨å†Œåˆ°ç³»ç»Ÿ
- ğŸ”§ è¿è¡Œæ—¶ä»æ•°æ®åº“è¯»å–é…ç½®ï¼ˆæç¤ºè¯ã€å·¥å…·ç­‰ï¼‰
- ğŸ”§ æ”¯æŒç”¨æˆ·åœ¨å‰ç«¯é¡µé¢è¿›è¡Œç¼–æ’

## Agent è°ƒç”¨æµç¨‹

1. API è¯·æ±‚åˆ°è¾¾ â†’ `AgentRegistry.create_agent(agent_id)`
2. å¦‚æœ `agent_id` åœ¨æ³¨å†Œè¡¨ä¸­ï¼ˆå†…ç½® Agentï¼‰â†’ ä½¿ç”¨æ³¨å†Œçš„ Agent
3. å¦‚æœ `agent_id` ä¸åœ¨æ³¨å†Œè¡¨ä¸­ï¼ˆç”¨æˆ·åˆ›å»ºçš„ Agentï¼‰â†’ ä½¿ç”¨ generic_agent æ¨¡æ¿ + æ•°æ®åº“é…ç½®

## åˆ›å»ºæ–°çš„å†…ç½® Agent

1. åˆ›å»ºç›®å½•ï¼š`llm_agents/your_agent/`
2. åˆ›å»º `graph.py` æ–‡ä»¶
3. ä½¿ç”¨ `@agent` è£…é¥°å™¨æ³¨å†Œ
4. ç³»ç»Ÿå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨å‘ç°å¹¶æ³¨å†Œ

è¯¦ç»†æŒ‡å—è¯·å‚è€ƒ [CREATE_CUSTOM_AGENT.md](./CREATE_CUSTOM_AGENT.md)

## LangGraph æ¶ˆæ¯ç®¡ç†

- **èŠ‚ç‚¹è¿”å›æ¶ˆæ¯**ï¼šåªè¿”å›æ–°å¢æ¶ˆæ¯ `{"messages": [new_msg]}`ï¼Œä¸è¦åŒ…å« `state["messages"]`
- **è‡ªåŠ¨åˆå¹¶**ï¼š`add_messages` reducer ä¼šè‡ªåŠ¨åˆå¹¶æ¶ˆæ¯åˆ°çŠ¶æ€ä¸­
- **æŒä¹…åŒ–**ï¼šé€šè¿‡ return è¿”å›çš„æ¶ˆæ¯ä¼šè¢« checkpoint æŒä¹…åŒ–

## é‡è¦æç¤º

- âš ï¸ **ä¸è¦ä¿®æ”¹ generic_agent**ï¼šå®ƒæ˜¯ç³»ç»Ÿæ¨¡æ¿ï¼Œç”¨äºæ”¯æŒå‰ç«¯åˆ›å»ºçš„è‡ªå®šä¹‰ Agent
- âš ï¸ **å†…ç½® Agent ä½¿ç”¨è£…é¥°å™¨**ï¼šæ‰€æœ‰éœ€è¦é¢„ç½®åˆ°ç³»ç»Ÿçš„ Agent éƒ½å¿…é¡»ä½¿ç”¨ `@agent` è£…é¥°å™¨
- âš ï¸ **å‰ç«¯ Agent ä¸ç”¨è£…é¥°å™¨**ï¼šå‰ç«¯åˆ›å»ºçš„ Agent é€šè¿‡ generic_agent æ¨¡æ¿è¿è¡Œï¼Œé…ç½®å­˜å‚¨åœ¨æ•°æ®åº“