@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

/* 基础样式 */
@layer base {
  * {
    border-color: #e5e7eb; /* 默认边框颜色 */
    outline-color: rgba(59, 130, 246, 0.5); /* 焦点轮廓颜色 */
  }
  
  body {
    background-color: #ffffff;
    color: #111827;
    /* 防止移动端滚动回弹 */
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
    /* 平滑的主题切换过渡 */
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  
  /* 暗黑模式基础样式 */
  .dark body {
    background-color: #111827;
    color: #f9fafb;
  }
  
  /* 修复菜单Link颜色继承问题 */
  .ant-menu-item-selected a,
  .ant-menu-submenu-selected a {
    color: inherit !important;
    text-decoration: none !important;
  }
  
  html {
    /* 防止整页滚动回弹 */
    overscroll-behavior: none;
  }
  
  /* 移动端基础优化 */
  @media (max-width: 768px) {
    /* 确保触摸滚动流畅 */
    * {
      -webkit-overflow-scrolling: touch;
    }
    
    /* 防止双击缩放 */
    button, input, select, textarea {
      touch-action: manipulation;
    }
    
    /* 优化字体渲染 */
    body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
    }
  }
}

/* Animation Delays */
.animation-delay-200 { animation-delay: 0.2s; }
.animation-delay-400 { animation-delay: 0.4s; }
.animation-delay-600 { animation-delay: 0.6s; }
.animation-delay-800 { animation-delay: 0.8s; }

/* Keyframes */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeInUpSmooth {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Animation Classes */
.animate-fadeIn {
  animation: fadeIn 0.5s ease-out forwards;
}
.animate-fadeInUp {
  animation: fadeInUp 0.5s ease-out forwards;
}
.animate-fadeInUpSmooth {
  animation: fadeInUpSmooth 0.3s ease-out forwards;
}

/* Dark mode styles for Ant Design Modal */
.dark-modal .ant-modal-content {
  background-color: #1f2937;
  color: #f3f4f6;
}

.dark-modal .ant-modal-header {
  background-color: #1f2937;
  border-bottom: 1px solid #374151;
}

.dark-modal .ant-modal-title {
  color: #f3f4f6;
}

.dark-modal .ant-modal-close {
  color: #9ca3af;
}

.dark-modal .ant-modal-close:hover {
  color: #f3f4f6;
}

.dark-modal .ant-modal-footer {
  border-top: 1px solid #374151;
}

/* 主题切换过渡效果 */
@layer components {
  .theme-transition {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
  }
}

/* 移动端响应式工具类 */
@layer utilities {
  /* 移动端专用间距 */
  .mobile-p-safe {
    padding: max(16px, env(safe-area-inset-top)) max(16px, env(safe-area-inset-right)) max(16px, env(safe-area-inset-bottom)) max(16px, env(safe-area-inset-left));
  }
  
  /* 移动端专用高度 */
  .mobile-h-screen {
    height: 100vh;
    height: 100dvh; /* 动态视口高度，避免移动端地址栏影响 */
  }
  
  /* 移动端触摸优化 */
  .touch-friendly {
    min-height: 44px; /* Apple 推荐的最小触摸目标 */
    min-width: 44px;
  }
}

/* 防止顶部菜单文本省略号 */
.top-menu-no-ellipsis .ant-menu-item {
  white-space: nowrap !important;
}

.top-menu-no-ellipsis .ant-menu-title-content {
  white-space: nowrap !important;
  overflow: visible !important;
  text-overflow: clip !important;
}

/* 折叠状态的侧边栏菜单防止省略号 */
.ant-layout-sider-collapsed .ant-menu-inline-collapsed > .ant-menu-item,
.ant-layout-sider-collapsed .ant-menu-inline-collapsed > .ant-menu-submenu > .ant-menu-submenu-title {
  padding: 0 16px !important;
}

.ant-layout-sider-collapsed .ant-menu-item-icon,
.ant-layout-sider-collapsed .ant-menu-submenu-title .ant-menu-item-icon {
  font-size: 16px !important;
}

/* 确保折叠时的提示框显示完整文本 */
.ant-tooltip-inner {
  white-space: nowrap !important;
}