# 树形菜单管理组件

## 📁 文件说明

- `TreeMenuManagement.tsx` - 树形菜单管理主组件

## 🚀 使用方法

### 1. 在路由中添加页面

```typescript
// src/App.tsx 或路由配置文件中
import TreeMenuManagement from './pages/System/TreeMenuManagement';

// 添加路由
{
  path: '/system/tree-menu',
  component: TreeMenuManagement,
  meta: { title: '树形菜单管理' }
}
```

### 2. 在菜单中添加入口

可以通过现有的菜单管理功能添加此页面的菜单项：

```json
{
  "menu_name": "树形菜单管理",
  "menu_icon": "menu",
  "route_path": "/system/tree-menu",
  "menu_component": "TreeMenuManagement",
  "parent_id": -1,  // 或其他父菜单ID
  "show_menu": 1
}
```

## ✨ 功能特性

### 🌳 树形展示
- 左侧树形结构展示所有菜单
- 支持多级嵌套菜单
- 清晰的层级关系展示
- 实时状态显示（显示/隐藏）

### 🛠️ 操作功能
- **新增根菜单** - 点击左上角按钮
- **添加子菜单** - 在菜单节点操作下拉中选择
- **编辑菜单** - 选中节点后在右侧编辑
- **删除菜单** - 操作下拉中删除（会检查子菜单）
- **显示/隐藏切换** - 快速切换菜单显示状态

### 📝 表单字段
- **菜单名称** - 显示在菜单中的名称
- **菜单图标** - 图标标识符
- **路由路径** - 前端路由路径
- **组件名称** - 对应的React组件名
- **重定向路径** - 可选的重定向路径
- **显示状态** - 控制菜单是否显示

## 🔧 技术实现

### API接口
```typescript
// 获取菜单树
GET /api/v1/auth/admin/menus

// 创建菜单
POST /api/v1/auth/admin/menus

// 更新菜单
PUT /api/v1/auth/admin/menus/{id}

// 删除菜单
DELETE /api/v1/auth/admin/menus/{id}
```

### 数据流
```
1. 加载菜单数据 → buildTreeData() → 构建树形结构
2. 用户操作 → API调用 → 刷新数据 → 更新UI
3. 表单验证 → 数据提交 → 成功反馈
```

## 🎨 界面布局

```
┌─────────────────────────────────────────────────┐
│ 🌳 菜单树                    📝 菜单详情/编辑     │
│ ├─ 📊 仪表板                 ┌─────────────────┐ │
│ │  └─ 👥 用户管理           │  菜单名称: xxx   │ │
│ ├─ ⚙️ 系统管理              │  路由路径: xxx   │ │
│ │  ├─ 📋 角色管理           │  组件名称: xxx   │ │
│ │  └─ 📋 菜单管理           │  菜单图标: xxx   │ │
│ └─ 📄 SOP管理               │  显示状态: xxx   │ │
│    ├─ 📄 SOP列表            │                  │ │
│    └─ 📄 SOP模板            │  [保存] [删除]   │ │
│                             └─────────────────┘ │
└─────────────────────────────────────────────────┘
```

## 🚨 注意事项

1. **认证要求** - 需要有效的JWT token才能进行增删改操作
2. **权限控制** - 确保用户有菜单管理权限
3. **数据同步** - 操作后会自动刷新菜单树
4. **错误处理** - 包含完整的错误提示和处理

## 🔄 与现有系统集成

1. **前端路由** - 创建的菜单会影响前端路由生成
2. **组件映射** - `menu_component` 需要在组件注册表中存在
3. **权限系统** - 未来可扩展基于角色的菜单权限控制

## 🛠️ 开发建议

1. **图标系统** - 建议统一图标命名规范
2. **组件注册** - 维护组件名称与路径的映射关系
3. **路由同步** - 考虑菜单变更后的路由自动更新
4. **缓存策略** - 对菜单数据进行适当缓存

这个组件提供了完整的树形菜单管理功能，可以直接在你的系统中使用！🎯